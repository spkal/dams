---
title: "U.S. Dams"
author: "Stephen Kaluzny"
date: '`r format(Sys.Date(), "%B %d, %Y")`'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
```

## Get the Data
Use the `dams` package from CRAN to download all the NID data.
```{r getdata}
if(file.exists("dams_all.Rds")) {
  dams_all <- readRDS("dams_all.Rds")
} else {
  library(dams)
  dams_all <- extract_nid(sample_only = FALSE)
}
dim(dams_all)
names(dams_all)
```

## Initial View of the Data
```{r explore01}
summary(dams_all)
```

## Missing values
```{r missing}
missingCount <- sapply(dams_all, function(x) sum(is.na(x)))
missingCount <- missingCount[missingCount > 0]
o <- order(-missingCount)
missingCount <- missingCount[o]
pltMissing <- ggplot(data.frame(Var=names(missingCount), NMissing=missingCount),
    aes(Var, NMissing)) + geom_bar(stat = "identity")
pltMissing
```

What kinds of dams?
```{r}
with(dams_all, table(Dam_Type))
with(dams_all, table(Core))
with(dams_all, table(Foundation))
```
